<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minecraft Guerra: A Titanomaquia</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Metamorphous&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        obsidian: '#1a1a1a',
                        bedrock: '#0a0a0a',
                        gold: '#FFD700',
                        golddim: '#B8860B',
                        mythicred: '#8B0000',
                        mythicblue: '#191970',
                        diamond: '#b9f2ff',
                        emerald: '#50c878'
                    },
                    fontFamily: {
                        heading: ['Cinzel', 'serif'],
                        subheading: ['Metamorphous', 'serif'],
                        body: ['Open Sans', 'sans-serif'],
                    },
                    backgroundImage: {
                        'Greek-pattern': "url('https://www.transparenttextures.com/patterns/black-scales.png')",
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 3s ease-in-out infinite',
                        'glow': 'glow 2s ease-in-out infinite alternate',
                        'shine': 'shine 1s linear infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        glow: {
                            'from': { textShadow: '0 0 10px #FFD700, 0 0 20px #B8860B' },
                            'to': { textShadow: '0 0 20px #FFD700, 0 0 30px #FFD700, 0 0 40px #B8860B' }
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: #0a0a0a; }
        ::-webkit-scrollbar-thumb { background: #B8860B; border-radius: 5px; }
        
        /* Animations */
        .fade-in-section {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
            will-change: opacity, visibility;
        }
        .fade-in-section.is-visible { opacity: 1; transform: none; }

        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.5), 0 0 15px rgba(184, 134, 11, 0.3);
        }
        
        .gold-glow-text {
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.6);
        }

        /* Countdown specific styles */
        .countdown-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid #B8860B;
            border-radius: 8px;
            padding: 1rem;
            min-width: 80px;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.15);
        }
        .countdown-number {
            font-family: 'Cinzel', serif;
            font-size: 2.5rem;
            font-weight: 900;
            color: #FFD700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }
        .countdown-label {
            font-family: 'Open Sans', sans-serif;
            font-size: 0.75rem;
            color: #B8860B;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-top: 0.25rem;
        }

        /* Form styling */
        .input-mythic {
            background-color: rgba(0, 0, 0, 0.4);
            border: 1px solid #444;
            color: #e5e7eb;
            padding: 0.75rem;
            width: 100%;
            border-radius: 0.375rem;
            transition: all 0.3s;
            font-family: 'Open Sans', sans-serif;
        }
        .input-mythic:focus {
            border-color: #FFD700;
            outline: none;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.2);
        }
        .input-mythic.error {
            border-color: #ef4444;
            box-shadow: 0 0 10px rgba(239, 68, 68, 0.2);
        }
        select.input-mythic option {
            background-color: #1a1a1a;
            color: #e5e7eb;
        }
        input[type="color"] {
            height: 50px;
            padding: 0.2rem;
            cursor: pointer;
        }
        
        .farm-taken {
            opacity: 0.5;
            cursor: not-allowed !important;
            filter: grayscale(80%);
        }
        .farm-taken .check-icon {
            display: none !important;
        }

        /* Minecraft Glass Picker Styles */
        .glass-picker-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-top: 8px;
        }
        .glass-option {
            aspect-ratio: 1;
            cursor: pointer;
            border: 2px solid rgba(255, 255, 255, 0.1);
            position: relative;
            transition: transform 0.1s, border-color 0.1s;
            background-image: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 20%, rgba(255,255,255,0) 80%, rgba(255,255,255,0.1) 100%);
        }
        .glass-option:hover {
            transform: scale(1.1);
            z-index: 10;
            border-color: rgba(255, 255, 255, 0.5);
        }
        .glass-option.selected {
            border: 3px solid #FFD700; /* Gold selection */
            box-shadow: 0 0 10px #FFD700;
            transform: scale(1.1);
            z-index: 10;
        }
        .glass-option.disabled {
            opacity: 0.3;
            cursor: not-allowed;
            filter: grayscale(100%);
            transform: none;
            border-color: #444;
        }
        .glass-shine {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 4px;
            height: 4px;
            background: rgba(255, 255, 255, 0.6);
        }
        .glass-shine-2 {
            position: absolute;
            bottom: 2px;
            right: 2px;
            width: 2px;
            height: 2px;
            background: rgba(255, 255, 255, 0.4);
        }
        
        /* Election Progress Bar */
        .vote-bar-bg {
            width: 100%;
            height: 8px;
            background-color: #1a1a1a;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 8px;
        }
        .vote-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #B8860B, #FFD700);
            transition: width 0.5s ease-out;
        }
    </style>
</head>
<body class="bg-bedrock text-gray-200 font-body overflow-x-hidden selection:bg-gold selection:text-black">

    <nav class="fixed top-0 w-full z-40 bg-obsidian/90 backdrop-blur-md border-b border-golddim/30">
        <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <span class="material-symbols-outlined text-gold">swords</span>
                <span class="font-heading font-bold text-xl text-gold gold-glow-text">A Batalha dos 100</span>
            </div>
            <div class="hidden md:flex gap-6 text-sm font-semibold tracking-widest text-gray-400">
                <a href="#introducao" class="hover:text-gold transition-colors">GUIA</a>
                <a href="#ciclo" class="hover:text-gold transition-colors">HORÁRIOS</a>
                <a href="#pantheom" class="hover:text-gold transition-colors text-gold">LÍDERES</a>
                <a href="#clas" class="hover:text-gold transition-colors">CLÃS</a>
                <a href="#economia" class="hover:text-gold transition-colors">ECONOMIA</a>
                <a href="#registro" class="hover:text-gold transition-colors">REGISTRO</a>
                <a href="#saga" class="hover:text-gold transition-colors">SAGA</a>
                <a href="#tesouro" class="text-gold hover:text-white transition-colors border border-gold/30 px-2 py-1 rounded bg-gold/10">TESOURO</a>
            </div>
        </div>
    </nav>

    <header class="relative h-screen flex items-center justify-center overflow-hidden bg-obsidian">
        <div class="absolute inset-0 z-0">
            <!-- Imagem Local: atenas.jpg -->
            <img src="atenas.jpg" alt="Greek Minecraft Landscape" class="w-full h-full object-cover opacity-50 grayscale brightness-75">
            <div class="absolute inset-0 bg-gradient-to-b from-transparent via-bedrock/60 to-bedrock"></div>
        </div>
        
        <div class="relative z-10 text-center px-4 max-w-4xl fade-in-section">
            <div class="mb-4 inline-block px-4 py-1 border border-gold/50 rounded-full bg-black/50 backdrop-blur-sm">
                <span class="text-gold text-xs font-bold tracking-[0.3em] uppercase">Saga: A Titanomaquia</span>
            </div>
            <h1 class="text-5xl md:text-7xl font-heading font-black text-white mb-6 leading-tight drop-shadow-2xl">
                MINECRAFT <span class="text-transparent bg-clip-text bg-gradient-to-r from-gold to-yellow-200">GUERRA</span>
            </h1>
            <p class="text-lg md:text-2xl font-subheading text-gray-300 italic mb-8 max-w-2xl mx-auto border-l-4 border-gold pl-6 text-left">
                "Tebas olha para baixo, entediado com a paz. Ele exige glória. Ele exige sangue. Ele exige um Campeão."
            </p>

            <div id="join-modal" class="fixed inset-0 z-50 hidden flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/90 backdrop-blur-sm" onclick="closeJoinModal()"></div>
        <div class="relative bg-stone-900 border-2 border-gold p-8 rounded-lg max-w-md w-full shadow-[0_0_50px_rgba(255,215,0,0.2)] animate-[pulse_0.2s_ease-out]">
            <button onclick="closeJoinModal()" class="absolute top-4 right-4 text-gray-500 hover:text-white">
                <span class="material-symbols-outlined">close</span>
            </button>
            <div class="text-center mb-6">
                <span class="material-symbols-outlined text-5xl text-gold mb-2">person_add</span>
                <h3 class="text-2xl font-heading text-white">Convocação</h3>
                <p class="text-gray-400 text-xs uppercase tracking-widest">Inscreva seu nome na história</p>
            </div>
            <div class="space-y-4">
                <div>
                    <label class="block text-gray-400 text-xs font-bold mb-1 uppercase">Nome (Opcional):</label>
                    <input type="text" id="player-realname" class="input-mythic" placeholder="Seu nome">
                </div>
                <div>
                    <label class="block text-gold text-xs font-bold mb-1 uppercase">Nickname (No Jogo):</label>
                    <input type="text" id="player-nickname" class="input-mythic border-gold/50 focus:border-gold" placeholder="Ex: SteveGamer" required>
                </div>
                <button id="btn-confirm-join" onclick="confirmParticipation()" class="w-full py-3 bg-gold hover:bg-yellow-400 text-black font-bold uppercase tracking-widest transition-colors mt-2">
                    Confirmar Presença
                </button>
            </div>
        </div>
    </div>

            <a href="#introducao" class="group relative inline-flex items-center gap-2 px-8 py-4 bg-transparent border-2 border-gold text-gold font-bold uppercase tracking-widest hover:bg-gold hover:text-black transition-all duration-300">
                Ler os Decretos
                <span class="material-symbols-outlined group-hover:translate-x-1 transition-transform">arrow_downward</span>
            </a>
        </div>
    </header>

    <!-- INTRODUÇÃO / RP -->
    <section id="introducao" class="py-24 bg-obsidian border-b border-stone-800 fade-in-section relative overflow-hidden">
        <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/black-scales.png')] opacity-10"></div>
        <div class="max-w-5xl mx-auto px-4 relative z-10">
            
            <div class="text-center mb-16">
                <span class="material-symbols-outlined text-6xl text-gold mb-4 animate-pulse-slow">auto_stories</span>
                <h2 class="text-4xl font-heading text-white mb-4">A Crônica do Mundo</h2>
                <div class="h-1 w-24 bg-gold mx-auto"></div>
                <p class="mt-4 text-emerald-400 font-bold tracking-widest uppercase text-sm">Plataforma: Minecraft Bedrock Edition</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                <div class="space-y-6 text-gray-300 font-body text-lg leading-relaxed">
                    <p>
                        Bem-vindo a um palco onde a história não é contada por NPCs, mas forjada por <span class="text-gold font-bold">VOCÊ</span>. Este não é apenas um servidor de sobrevivência; é um <strong>Roleplay (RP)</strong> vivo e pulsante.
                    </p>
                    <p>
                        Cada bloco colocado, cada aliança firmada e cada traição cometida ecoará na eternidade. Você tem a liberdade absoluta para criar sua própria narrativa, encarnar seu personagem e interagir com outros para tecer lendas que serão lembradas muito depois do fim.
                    </p>
                    <div class="bg-gradient-to-r from-stone-800 to-transparent p-4 border-l-4 border-gold">
                        <p class="italic text-gray-400 text-sm">
                            "A diversão reside na imersão. O prazer está na competição honrosa. O espírito de guerra vive em cada um de nós."
                        </p>
                    </div>
                </div>

                <div class="space-y-6">
                    <!-- ANTI-RP ALERT -->
                    <div class="bg-red-950/30 border border-red-800/50 p-6 rounded-lg relative overflow-hidden group hover:border-red-600 transition-colors">
                        <div class="absolute -right-4 -top-4 text-red-900/20 group-hover:text-red-900/40 transition-colors">
                            <span class="material-symbols-outlined text-9xl">gavel</span>
                        </div>
                        <h3 class="text-red-500 font-heading text-xl mb-2 flex items-center gap-2">
                            <span class="material-symbols-outlined">warning</span> Decreto Anti-RP
                        </h3>
                        <p class="text-gray-400 text-sm relative z-10">
                            Quebrar o personagem ou arruinar a imersão de outros jogadores (Anti-RP) é uma ofensa grave aos olhos de Tebas. Aqueles que desrespeitarem a narrativa estarão sujeitos a <strong>punições severas</strong> pelo Administrador. Mantenha a magia viva.
                        </p>
                    </div>

                    <!-- DADIVAS DE TEBAS -->
                    <div class="bg-indigo-950/30 border border-indigo-800/50 p-6 rounded-lg relative overflow-hidden group hover:border-indigo-500 transition-colors">
                        <div class="absolute -right-4 -top-4 text-indigo-900/20 group-hover:text-indigo-900/40 transition-colors">
                            <span class="material-symbols-outlined text-9xl">card_giftcard</span>
                        </div>
                        <h3 class="text-indigo-400 font-heading text-xl mb-2 flex items-center gap-2">
                            <span class="material-symbols-outlined">stars</span> As Dádivas de Tebas
                        </h3>
                        <p class="text-gray-400 text-sm relative z-10">
                            Periodicamente, o próprio Tebas sorrirá para seus campeões. Eventos místicos, quests sagradas e missões de alto risco surgirão. Aqueles bravos o suficiente para completá-las trarão glória e <strong>recompensas valiosas</strong> para seus Clãs.
                        </p>
                    </div>
                </div>
            </div>

            <div class="mt-16 text-center">
                <p class="font-heading text-2xl text-gray-400 italic">
                    "Lendas nascerão. Impérios cairão. Qual será o seu legado?"
                </p>
                <div class="mt-8 animate-bounce">
                    <span class="material-symbols-outlined text-gold text-3xl">keyboard_double_arrow_down</span>
                </div>
            </div>
        </div>
    </section>

    <section id="ciclo" class="py-24 bg-stone-900 border-b border-stone-800 fade-in-section relative overflow-hidden">
        <div class="absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-gold/10 via-stone-900 to-stone-900 pointer-events-none"></div>
        
        <div class="max-w-5xl mx-auto px-4 text-center relative z-10">
            <span class="material-symbols-outlined text-7xl text-gold mb-6 animate-pulse-slow drop-shadow-[0_0_25px_rgba(255,215,0,0.6)]">schedule</span>
            <h2 class="text-5xl font-heading text-white mb-10 gold-glow-text">I. O Ciclo do Sol</h2>
            
            <p class="text-gray-300 mb-12 max-w-2xl mx-auto text-lg leading-relaxed">
                O portal para este reino obedece à vontade divina. Fora destes horários, a barreira de Tebas é <span class="text-red-500 font-bold">impenetrável</span>.
            </p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                <div class="bg-black/60 border-2 border-emerald-900 p-8 rounded-xl shadow-[0_0_30px_rgba(16,185,129,0.1)] hover:border-emerald-400 hover:shadow-[0_0_40px_rgba(16,185,129,0.3)] transition-all duration-500 group relative overflow-hidden transform hover:-translate-y-1">
                    <div class="absolute inset-0 bg-emerald-500/5 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                    <h3 class="text-2xl font-heading text-emerald-400 mb-4 group-hover:text-emerald-300 flex items-center justify-center gap-3">
                        <span class="material-symbols-outlined">wb_sunny</span> Segunda a Sexta
                    </h3>
                    <div class="text-5xl font-black text-white drop-shadow-md">
                        18:00 <span class="text-xl text-gray-500 font-normal mx-1">às</span> 00:00
                    </div>
                </div>

                <div class="bg-black/60 border-2 border-red-900 p-8 rounded-xl shadow-[0_0_30px_rgba(239,68,68,0.1)] hover:border-red-500 hover:shadow-[0_0_40px_rgba(239,68,68,0.3)] transition-all duration-500 group relative overflow-hidden transform hover:-translate-y-1">
                    <div class="absolute inset-0 bg-red-500/5 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                    <h3 class="text-2xl font-heading text-red-500 mb-4 group-hover:text-red-400 flex items-center justify-center gap-3">
                        <span class="material-symbols-outlined">local_fire_department</span> Finais de Semana
                    </h3>
                    <div class="text-5xl font-black text-white drop-shadow-md">
                        14:00 <span class="text-xl text-gray-500 font-normal mx-1">às</span> 00:00
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- NOVA SEÇÃO: ELEIÇÃO DE LÍDERES -->
    <section id="eleicao" class="py-20 bg-stone-900 border-b border-stone-800 fade-in-section relative">
         <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/black-scales.png')] opacity-20"></div>
         <div class="max-w-7xl mx-auto px-4 relative z-10">
             <div class="text-center mb-16">
                <span class="material-symbols-outlined text-6xl text-purple-500 mb-4">how_to_vote</span>
                <h2 class="text-4xl font-heading text-white mb-4">A Ascensão dos Reis</h2>
                <div class="h-1 w-24 bg-purple-500 mx-auto"></div>
                <p class="mt-4 text-gray-400">O trono não é dado, é conquistado pelo povo. Escolha os 4 pilares de Tebas.</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Coluna Esquerda: Inscrição / Seu Voto -->
                <div class="lg:col-span-1 bg-obsidian border border-purple-500/30 p-6 rounded-lg shadow-lg h-fit sticky top-24">
                    <h3 class="text-xl font-heading text-purple-400 mb-4">Sua Voz</h3>
                    
                    <div id="election-status-box" class="mb-6 p-3 bg-black/40 rounded border border-stone-700 text-center text-sm">
                        Status: <span id="election-status-text" class="text-white font-bold">Inscrições Abertas</span>
                    </div>

                    <!-- Form de Inscrição -->
                    <div id="candidate-form-box" class="space-y-3">
                        <label class="block text-gray-400 text-xs font-bold uppercase">Deseja Liderar?</label>
                        <input type="text" id="new-candidate-name" class="input-mythic" placeholder="Seu Nick">
                        
                        <label class="block text-gray-400 text-xs font-bold uppercase mt-2">Lema de Campanha:</label>
                        <input type="text" id="candidate-slogan" class="input-mythic" placeholder="Ex: Ouro para todos!" maxlength="50">
                        
                        <label class="block text-gray-400 text-xs font-bold uppercase mt-2">Estratégia de Farm:</label>
                        <select id="candidate-farm" class="input-mythic cursor-pointer">
                            <option value="Ferro">Foco em Ferro</option>
                            <option value="Ouro">Foco em Ouro</option>
                            <option value="Raid">Foco em Raid</option>
                            <option value="XP">Foco em XP</option>
                        </select>

                        <button onclick="registerCandidateForElection()" class="w-full py-3 bg-purple-900 hover:bg-purple-700 border border-purple-500 text-white font-bold uppercase tracking-widest text-sm transition-all mt-2">
                            Candidatar-se
                        </button>
                    </div>

                    <!-- Painel de Identificação para Voto (Aparece quando votação ativa) -->
                    <div id="voter-identity-box" class="hidden space-y-4">
                        <div>
                            <label class="block text-gray-400 text-xs font-bold mb-2 uppercase">Seu Identificador:</label>
                            <input type="text" id="voter-name" class="input-mythic" placeholder="Seu Nick (Obrigatório)">
                        </div>
                        
                        <div class="bg-stone-800/50 p-4 rounded border border-stone-600 text-center">
                             <span class="block text-xs text-gray-400 uppercase mb-1">Seus Escolhidos</span>
                             <span class="text-2xl font-bold text-gold" id="selected-count-display">0</span>
                             <span class="text-sm text-gray-400">/ 4</span>
                        </div>

                        <button id="confirm-vote-btn" onclick="submitMultiVote()" class="w-full py-3 bg-emerald-800 hover:bg-emerald-600 border border-emerald-500 text-white font-bold uppercase tracking-widest text-sm transition-all disabled:opacity-50 disabled:cursor-not-allowed">
                            Confirmar Votos
                        </button>
                        
                        <p class="text-[10px] text-gray-500 text-center italic mt-2">* Selecione exatamente 4 candidatos para validar.</p>

                        <!-- Admin Button Simulation -->
                        <button onclick="revealResults()" class="w-full py-2 bg-stone-800 hover:bg-red-900 border border-stone-600 text-xs text-gray-400 hover:text-white font-bold uppercase tracking-widest transition-all mt-4">
                            <span class="material-symbols-outlined align-middle text-sm mr-1">visibility</span> 
                            Revelar Resultados (Admin)
                        </button>
                    </div>
                </div>

                <!-- Coluna Direita: Lista de Candidatos / Votação -->
                <div class="lg:col-span-2 bg-stone-800/50 border border-stone-700 p-6 rounded-lg min-h-[400px]">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-heading text-white" id="candidates-title">Candidatos ao Trono</h3>
                        <span class="text-sm text-gray-400" id="candidate-count-display">0 Candidatos</span>
                    </div>

                    <!-- Mensagem de Aclamação (Estado < 4) -->
                    <div id="acclamation-msg" class="hidden mb-4 p-4 bg-emerald-900/30 border border-emerald-500/30 rounded text-emerald-200 text-sm text-center">
                        <span class="material-symbols-outlined align-middle mr-2">verified</span>
                        Poucos candidatos. Estes guerreiros assumirão o trono por Aclamação Automática se não houver oposição.
                    </div>

                    <!-- Lista -->
                    <div id="candidates-list" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- JS vai preencher aqui -->
                        <div class="text-gray-500 italic col-span-2 text-center py-10">Nenhum candidato se apresentou ainda.</div>
                    </div>
                </div>
            </div>
         </div>
    </section>

    <section id="clas" class="py-20 px-4 relative bg-Greek-pattern fade-in-section">
        <div class="max-w-6xl mx-auto">
            <div class="text-center mb-16">
                <span class="material-symbols-outlined text-6xl text-gold mb-4">groups</span>
                <h2 class="text-4xl font-heading text-white mb-4">II. A Estrutura dos Clãs</h2>
                <div class="h-1 w-24 bg-gold mx-auto"></div>
                <p class="mt-4 text-gray-400">Regidos por 4 Cristais Primordiais, os Clãs são a alma da Titanomaquia.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Card 1: Identidade e Tribunal -->
                <div class="bg-obsidian border border-stone-700 p-8 rounded-lg relative overflow-hidden group card-hover transition-all duration-300">
                    <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-30 transition-opacity">
                        <span class="material-symbols-outlined text-9xl">gavel</span>
                    </div>
                    <h3 class="text-2xl font-heading text-gold mb-4">Hierarquia & Identidade</h3>
                    <ul class="space-y-4 text-gray-300">
                        <li class="flex items-start gap-3">
                            <span class="material-symbols-outlined text-gold shrink-0">palette</span>
                            <span><strong>Cores Únicas:</strong> Cada clã deve possuir uma cor exclusiva para estandartes, vidros e armaduras. <span class="text-red-400">Não pode haver repetição.</span></span>
                        </li>
                        <li class="flex items-start gap-3">
                            <span class="material-symbols-outlined text-purple-400 shrink-0">badge</span>
                            <span><strong>Títulos de Honra:</strong> Players devem usar títulos nos nicks (ex: [ALMIRANTE] Trojan) na cor do clã, respeitando o Tema escolhido.</span>
                        </li>
                        <li class="flex items-start gap-3">
                            <span class="material-symbols-outlined text-emerald-400 shrink-0">group_add</span>
                            <span><strong>Recrutamento:</strong> A formação inicia apenas com o surgimento dos Líderes. Somente o Líder registra o clã.</span>
                        </li>
                        <li class="flex items-start gap-3">
                            <span class="material-symbols-outlined text-red-500 shrink-0">balance</span>
                            <span><strong>Supremo Tribunal:</strong> Composto unicamente pelos 4 Líderes de Clã para julgar o destino do mundo.</span>
                        </li>
                    </ul>
                </div>

                <!-- Card 2: Regras do Cristal -->
                <div class="bg-obsidian border border-stone-700 p-8 rounded-lg relative overflow-hidden group card-hover transition-all duration-300">
                    <div class="absolute inset-0">
                        <!-- Imagem Local: end-crystal.jpg -->
                        <img src="end-crystal.jpg" alt="End Crystal Altar" class="w-full h-full object-cover opacity-40 group-hover:scale-105 transition-transform duration-700">
                        <div class="absolute inset-0 bg-gradient-to-t from-obsidian via-obsidian/90 to-transparent z-0"></div>
                    </div>
                    <div class="relative z-10">
                        <h3 class="text-2xl font-heading text-purple-400 mb-4 flex items-center gap-2">
                            <span class="material-symbols-outlined">diamond</span> III. O Coração (End Crystal)
                        </h3>
                        <ul class="space-y-3 text-gray-300 text-sm">
                            <li class="border-l-2 border-purple-500 pl-3"><strong>Posição Sagrada:</strong> Deve estar no CENTRO absoluto da base (seja aérea, térrea ou subterrânea).</li>
                            <li class="border-l-2 border-purple-500 pl-3"><strong>O Domo:</strong> Obrigatório estar envolto por um cubo de vidro 3x3 na cor oficial da equipe.</li>
                            <li class="border-l-2 border-purple-500 pl-3"><strong>Fortificação:</strong> Pode e DEVE ser protegido com qualquer bloco (Obsidian, Água, etc). É a vida do seu clã.</li>
                            <li class="border-l-2 border-purple-500 pl-3 text-red-400"><strong>A Queda:</strong> Se explodir no evento final, o Clã perde o prêmio máximo.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="economia" class="py-20 bg-stone-900 border-y border-stone-800 fade-in-section">
        <div class="max-w-7xl mx-auto px-4">
            <div class="text-center mb-8">
                <span class="material-symbols-outlined text-5xl text-emerald-500 mb-2">savings</span>
                <h2 class="text-4xl font-heading text-white">IV. A Lei da Escassez</h2>
                <p class="text-gray-400 mt-2">Recursos infinitos destroem o comércio. Escolha seu destino.</p>
            </div>

            <div class="bg-emerald-900/20 border border-emerald-500/30 p-4 rounded-lg text-center max-w-3xl mx-auto mb-12">
                <p class="text-emerald-300 font-bold flex items-center justify-center gap-2">
                    <span class="material-symbols-outlined">sync_alt</span> Regra da Partilha
                </p>
                <p class="text-sm text-gray-300 mt-1">
                    Um Clã só pode <strong>TER</strong> (ser dono) de uma farm específica, mas os recursos gerados podem ser comercializados, doados ou compartilhados com outros clãs conforme a vontade do dono.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                
                <div id="opt-iron" class="bg-obsidian border border-stone-600 hover:border-gold p-6 rounded-lg cursor-pointer transition-all group relative overflow-hidden flex flex-col h-full" onclick="selectFarm('iron')">
                    <div class="absolute inset-0 z-0">
                        <!-- Imagem Local: farm-de-ferro.jpg -->
                        <img src="farm-de-ferro.jpg" alt="Iron Golem Farm" class="w-full h-full object-cover opacity-30 group-hover:opacity-50 transition-opacity duration-500">
                        <div class="absolute inset-0 bg-gradient-to-t from-obsidian via-transparent to-transparent"></div>
                    </div>
                    
                    <div class="relative z-10 flex flex-col h-full items-center text-center">
                         <div class="mb-4 text-gray-300 group-hover:text-white transition-colors h-24 flex items-center justify-center">
                            <span class="material-symbols-outlined text-6xl drop-shadow-lg">shield</span>
                        </div>
                        <h4 class="text-xl font-heading text-white group-hover:text-gold mb-2 flex items-center justify-center gap-2">
                            Caminho do Aço
                        </h4>
                        <p class="text-xs text-gray-400 uppercase tracking-widest mb-4">Farm de Ferro</p>
                        <div class="text-sm text-gray-300 flex-grow">
                            Ferro infinito para armaduras, ferramentas e pistões.
                        </div>
                        <div class="mt-4">
                             <span class="check-icon opacity-0 text-emerald-500 material-symbols-outlined text-3xl">check_circle</span>
                        </div>
                    </div>
                </div>

                <div id="opt-gold" class="bg-obsidian border border-stone-600 hover:border-gold p-6 rounded-lg cursor-pointer transition-all group relative overflow-hidden flex flex-col h-full" onclick="selectFarm('gold')">
                    <div class="absolute inset-0 z-0">
                        <!-- Imagem Local: farm-de-ouro.jpg -->
                        <img src="farm-de-ouro.jpg" alt="Gold Farm Pigman" class="w-full h-full object-cover opacity-30 group-hover:opacity-50 transition-opacity duration-500">
                        <div class="absolute inset-0 bg-gradient-to-t from-obsidian via-transparent to-transparent"></div>
                    </div>
                    
                    <div class="relative z-10 flex flex-col h-full items-center text-center">
                        <div class="mb-4 text-yellow-700 group-hover:text-yellow-500 transition-colors h-24 flex items-center justify-center">
                            <span class="material-symbols-outlined text-6xl drop-shadow-lg">payments</span>
                        </div>
                        <h4 class="text-xl font-heading text-white group-hover:text-gold mb-2 flex items-center justify-center gap-2 relative z-10">
                            Caminho da Riqueza
                        </h4>
                        <p class="text-xs text-gray-500 uppercase tracking-widest text-center mb-4">Farm de Ouro</p>
                        <div class="text-sm text-gray-400 text-center relative z-10 flex-grow">
                            Ouro infinito para Maçãs Douradas (Gapples) e trocas com Piglins.
                        </div>
                        <div class="mt-4 flex justify-center">
                             <span class="check-icon opacity-0 text-emerald-500 material-symbols-outlined text-3xl">check_circle</span>
                        </div>
                    </div>
                </div>

                <div id="opt-raid" class="bg-obsidian border border-stone-600 hover:border-gold p-6 rounded-lg cursor-pointer transition-all group relative overflow-hidden flex flex-col h-full" onclick="selectFarm('raid')">
                    <div class="absolute inset-0 z-0">
                        <!-- Imagem Local: raid-farm.jpg -->
                        <img src="raid-farm.jpg" alt="Raid Farm Totems" class="w-full h-full object-cover opacity-30 group-hover:opacity-50 transition-opacity duration-500">
                        <div class="absolute inset-0 bg-gradient-to-t from-obsidian via-transparent to-transparent"></div>
                    </div>
                    
                    <div class="relative z-10 flex flex-col h-full items-center text-center">
                        <div class="mb-4 text-red-800 group-hover:text-red-600 transition-colors h-24 flex items-center justify-center">
                            <span class="material-symbols-outlined text-6xl drop-shadow-lg">local_fire_department</span>
                        </div>
                        <h4 class="text-xl font-heading text-white group-hover:text-gold mb-2 flex items-center justify-center gap-2 relative z-10">
                            Caminho da Vida
                        </h4>
                        <p class="text-xs text-gray-500 uppercase tracking-widest text-center mb-4">Raid Farm</p>
                        <div class="text-sm text-gray-400 text-center relative z-10 flex-grow">
                            Totens da Imortalidade e Esmeraldas infinitas.
                        </div>
                        <div class="mt-4 flex justify-center">
                             <span class="check-icon opacity-0 text-emerald-500 material-symbols-outlined text-3xl">check_circle</span>
                        </div>
                    </div>
                </div>

                <div id="opt-xp" class="bg-obsidian border border-stone-600 hover:border-gold p-6 rounded-lg cursor-pointer transition-all group relative overflow-hidden flex flex-col h-full" onclick="selectFarm('xp')">
                    <div class="absolute inset-0 z-0">
                        <!-- Imagem Local: farm-de-xp.jpg -->
                        <img src="farm-de-xp.jpg" alt="Enderman XP Farm" class="w-full h-full object-cover opacity-30 group-hover:opacity-50 transition-opacity duration-500">
                        <div class="absolute inset-0 bg-gradient-to-t from-obsidian via-transparent to-transparent"></div>
                    </div>
                    
                    <div class="relative z-10 flex flex-col h-full items-center text-center">
                        <div class="mb-4 text-blue-800 group-hover:text-blue-500 transition-colors h-24 flex items-center justify-center">
                            <span class="material-symbols-outlined text-6xl drop-shadow-lg">bolt</span>
                        </div>
                        <h4 class="text-xl font-heading text-white group-hover:text-gold mb-2 flex items-center justify-center gap-2 relative z-10">
                            Caminho do Encanto
                        </h4>
                        <p class="text-xs text-gray-500 uppercase tracking-widest text-center mb-4">XP Massivo</p>
                        <div class="text-sm text-gray-400 text-center relative z-10 flex-grow">
                            Níveis de XP rápidos para encantamentos e reparação (Mending).
                        </div>
                        <div class="mt-4 flex justify-center">
                             <span class="check-icon opacity-0 text-emerald-500 material-symbols-outlined text-3xl">check_circle</span>
                        </div>
                    </div>
                </div>

            </div>
            
            <div id="economy-msg" class="text-center mt-8 font-heading text-xl text-gold opacity-0 transition-opacity min-h-[2rem]">
                </div>
        </div>
    </section>

    <!-- SEÇÃO: REGISTRO DE GUERRA (Permanece a mesma) -->
    <section id="registro" class="py-20 bg-stone-900 border-b border-stone-800 relative fade-in-section">
        <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/black-scales.png')] opacity-20"></div>
        <div class="max-w-7xl mx-auto px-4 relative z-10">
            <div class="text-center mb-16">
                <span class="material-symbols-outlined text-6xl text-gold mb-4">edit_document</span>
                <h2 class="text-4xl font-heading text-white mb-4">Registro de Guerra</h2>
                <div class="h-1 w-24 bg-gold mx-auto"></div>
                <p class="mt-4 text-gray-400">Inscreva seu Clã no livro da história. Apenas Líderes.</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                <!-- FORM -->
                <div class="bg-obsidian border-2 border-gold/50 p-8 rounded-lg shadow-[0_0_20px_rgba(0,0,0,0.5)] relative">
                    <h3 class="text-2xl font-heading text-gold mb-6 flex items-center gap-2">
                        <span class="material-symbols-outlined">swords</span> Novo Registro
                    </h3>
                    <p class="text-xs text-gray-500 mb-6 italic">* Apenas o Líder deve preencher este formulário.</p>
                    
                    <form id="clan-form" class="space-y-6" onsubmit="event.preventDefault(); registerClan();">
                        <div>
                            <label class="block text-gray-400 text-sm font-bold mb-2 uppercase tracking-wider">Nome do Clã:</label>
                            <input type="text" id="clan-name" class="input-mythic" placeholder="Ex: Os Spartanos" required>
                        </div>

                        <div>
                            <label class="block text-gray-400 text-sm font-bold mb-2 uppercase tracking-wider">Lema do Clã:</label>
                            <input type="text" id="clan-motto" class="input-mythic" placeholder="Ex: Força e Honra" maxlength="60">
                        </div>

                        <div>
                            <label class="block text-gray-400 text-sm font-bold mb-2 uppercase tracking-wider">Tema do Clã:</label>
                            <select id="clan-theme" class="input-mythic cursor-pointer" onchange="updateThemeInfo()">
                                <option value="" disabled selected>Escolha sua Hierarquia...</option>
                                <!-- JS will populate options -->
                            </select>
                            <div id="theme-info" class="mt-2 p-3 bg-black/40 rounded border border-stone-700 text-sm hidden transition-all">
                                <p id="theme-desc" class="text-gray-300 italic mb-2"></p>
                                <div class="grid grid-cols-3 gap-2 text-xs text-center">
                                    <div class="bg-stone-800 p-1 rounded"><span class="text-gold block mb-1">Líder</span><span id="theme-leader-title" class="font-bold text-white"></span></div>
                                    <div class="bg-stone-800 p-1 rounded"><span class="text-gray-400 block mb-1">Co-Líder</span><span id="theme-coleader-title" class="font-bold text-white"></span></div>
                                    <div class="bg-stone-800 p-1 rounded"><span class="text-gray-500 block mb-1">Membros</span><span id="theme-member-title" class="font-bold text-white"></span></div>
                                </div>
                            </div>
                        </div>

                        <div>
                            <label class="block text-gray-400 text-sm font-bold mb-2 uppercase tracking-wider">Cor da Equipe:</label>
                            <input type="hidden" id="clan-color" value="#FFFFFF"> <!-- Default White -->
                            <div class="glass-picker-grid" id="glass-picker">
                                <!-- JS will populate glass blocks -->
                            </div>
                            <div class="mt-4 flex items-center justify-between">
                                <span class="text-xs text-gray-500" id="selected-color-name">Selecionado: Branco</span>
                                <button type="button" onclick="copyColorCode()" class="px-4 py-2 bg-stone-800 border border-gold/30 text-gold rounded hover:bg-stone-700 transition-colors text-xs font-bold flex items-center gap-2 group relative">
                                    <span class="material-symbols-outlined text-sm">content_copy</span>
                                    Copiar Código
                                    <span id="copy-feedback" class="absolute -top-8 left-1/2 -translate-x-1/2 bg-emerald-500 text-white text-xs px-2 py-1 rounded opacity-0 transition-opacity">Copiado!</span>
                                </button>
                            </div>
                            <p class="text-xs text-red-400 mt-2 hidden" id="color-error-msg">* Esta cor já foi escolhida por outro clã.</p>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-gray-400 text-sm font-bold mb-2 uppercase tracking-wider" id="label-leader">Líder (Nick):</label>
                                <input type="text" id="clan-leader" class="input-mythic" placeholder="Ex: SteveGamer" required>
                            </div>
                            <div>
                                <label class="block text-gray-400 text-sm font-bold mb-2 uppercase tracking-wider" id="label-coleader">Co-Líder (Nick):</label>
                                <input type="text" id="clan-coleader" class="input-mythic" placeholder="Ex: AlexPro">
                            </div>
                        </div>

                        <div>
                            <label class="block text-gray-400 text-sm font-bold mb-2 uppercase tracking-wider" id="label-members">Membros (Nicks):</label>
                            <textarea id="clan-members" class="input-mythic h-24 resize-none" placeholder="Ex: Herobrine, Notch... (Separe por vírgula)" required></textarea>
                            <p id="member-count-feedback" class="text-xs text-gray-500 mt-1 text-right">0/6 Membros</p>
                        </div>

                        <div>
                            <label class="block text-gold text-sm font-bold mb-2 uppercase tracking-wider flex items-center gap-2">
                                <span class="material-symbols-outlined text-base">balance</span> Escolha da Economia:
                            </label>
                            <input type="text" id="clan-economy-input" class="input-mythic bg-stone-800 border-gold/30 text-gold cursor-not-allowed" placeholder="Clique em uma Farm na seção Economia acima" readonly required>
                            <input type="hidden" id="clan-economy-type">
                            <p class="text-xs text-gray-500 mt-1">* Selecione uma opção disponível na seção 'Lei da Escassez' acima.</p>
                        </div>

                        <button type="submit" id="register-btn" class="w-full py-4 bg-gradient-to-r from-gold to-yellow-600 text-black font-heading font-bold text-xl uppercase tracking-widest hover:brightness-110 transition-all shadow-lg transform hover:-translate-y-1 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0">
                            Registrar Clã
                        </button>
                    </form>
                     <div id="limit-reached-msg" class="absolute inset-0 bg-obsidian/90 backdrop-blur-sm flex items-center justify-center text-center p-8 hidden">
                        <div>
                            <span class="material-symbols-outlined text-6xl text-red-500 mb-4">block</span>
                            <h3 class="text-2xl font-heading text-red-500 mb-2">Limite de Clãs Atingido</h3>
                            <p class="text-gray-300">O mundo já possui 4 clãs registrados. Novas inscrições estão encerradas.</p>
                        </div>
                    </div>
                </div>

                <!-- DISPLAY / CLÃS REGISTRADOS -->
                <div class="bg-bedrock/50 border border-stone-700 p-8 rounded-lg overflow-hidden relative min-h-[500px]">
                    <h3 class="text-2xl font-heading text-white mb-6 flex items-center gap-2">
                        <span class="material-symbols-outlined">flag</span> Clãs Registrados
                        <span id="clan-count" class="text-sm text-gray-400 ml-auto font-body">(0/4)</span>
                    </h3>
                    
                    <div id="clan-list" class="space-y-6 overflow-y-auto max-h-[600px] pr-2">
                        <!-- Clãs serão inseridos aqui via JS -->
                        <div class="text-center text-gray-500 mt-20 italic" id="empty-state">
                            Nenhum clã registrado ainda.<br>Seja o primeiro a marcar território.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- NOVA SEÇÃO: INFORMAÇÕES & CÓDIGO DA JUSTIÇA -->
    <section id="informacoes" class="py-20 bg-bedrock border-b border-stone-800 relative fade-in-section">
        <div class="max-w-6xl mx-auto px-4">
            <div class="text-center mb-16">
                <span class="material-symbols-outlined text-6xl text-stone-400 mb-4">balance</span>
                <h2 class="text-4xl font-heading text-white mb-4">Informações & O Código da Justiça</h2>
                <div class="h-1 w-24 bg-gold mx-auto"></div>
                <p class="mt-4 text-gray-400">"A espada fere, mas a pena condena." - Conheça as leis do mundo.</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                <!-- Coluna 1: Artigos do Código -->
                <div class="space-y-8">
                    <div class="bg-stone-900/80 border border-stone-700 p-6 rounded-lg">
                        <h3 class="text-xl font-heading text-gold mb-4 flex items-center gap-2">
                            <span class="material-symbols-outlined">account_balance</span> Artigo I: A Corte
                        </h3>
                        <p class="text-gray-300 text-sm leading-relaxed mb-4">
                            O Poder Judiciário é exercido pelo <strong>Supremo Tribunal dos Quatro</strong>.
                        </p>
                        <ul class="text-sm text-gray-400 space-y-2 border-l-2 border-stone-600 pl-4">
                            <li><strong class="text-white">Os Juízes:</strong> Os 4 Líderes de Clã.</li>
                            <li><strong class="text-white">Juiz Supremo:</strong> TEBAS (Poder de veto e desempate).</li>
                        </ul>
                    </div>

                    <div class="bg-stone-900/80 border border-stone-700 p-6 rounded-lg">
                        <h3 class="text-xl font-heading text-blue-400 mb-4 flex items-center gap-2">
                            <span class="material-symbols-outlined">shield_person</span> Artigo II: O Direito de Defesa
                        </h3>
                        <p class="text-gray-300 text-sm leading-relaxed mb-2">
                            Todo guerreiro acusado tem direito a um defensor.
                        </p>
                        <ul class="text-sm text-gray-400 space-y-2 border-l-2 border-blue-900 pl-4">
                            <li><strong class="text-blue-200">O Advogado:</strong> O Co-Líder do Clã assume automaticamente esta função.</li>
                            <li><strong class="text-blue-200">Função:</strong> Apresentar provas, argumentar e negociar a pena.</li>
                            <li class="italic text-xs opacity-70">* Se o Co-Líder for o Réu, o Líder assume a defesa.</li>
                        </ul>
                    </div>

                    <div class="bg-stone-900/80 border border-stone-700 p-6 rounded-lg">
                        <h3 class="text-xl font-heading text-emerald-500 mb-4 flex items-center gap-2">
                            <span class="material-symbols-outlined">find_in_page</span> Artigo III: A Lei da Evidência
                        </h3>
                        <p class="text-emerald-200 font-bold text-sm mb-2">"Sem prova, sem crime."</p>
                        <ul class="text-sm text-gray-400 space-y-2">
                            <li>📸 <strong>Provas Aceitas:</strong> Prints inteiros, Vídeos (Links no chat), Logs.</li>
                            <li>🗣️ <strong>Testemunhas:</strong> Só valem se confirmadas por 2 pessoas de clãs diferentes ou prova visual.</li>
                            <li>📖 <strong>O Livro da Verdade:</strong> Acusação e Defesa devem escrever seus argumentos em um <em>Book & Quill</em> dentro do jogo.</li>
                        </ul>
                    </div>

                    <div class="bg-stone-900/80 border border-stone-700 p-6 rounded-lg">
                        <h3 class="text-xl font-heading text-red-500 mb-4 flex items-center gap-2">
                            <span class="material-symbols-outlined">gavel</span> Artigo IV: O Julgamento de Reis
                        </h3>
                        <p class="text-gray-300 text-sm leading-relaxed">
                            Se um <strong>Líder de Clã</strong> for o acusado, o julgamento poderá ser decidido pelo Supremo Tribunal ou, caso ele queira, tornar-se-á <strong>Divino</strong>, conduzido exclusivamente por TEBAS, para evitar golpes políticos.
                        </p>
                    </div>
                </div>

                <!-- Coluna 2: Estrutura e Rituais -->
                <div class="space-y-8">
                    <div class="bg-gradient-to-b from-stone-800 to-stone-900 border-2 border-gold/20 p-8 rounded-lg text-center relative overflow-hidden">
                        <div class="absolute top-0 right-0 p-4 opacity-10">
                            <span class="material-symbols-outlined text-8xl">architecture</span>
                        </div>
                        <h3 class="text-2xl font-heading text-white mb-6">A Arquitetura do Tribunal</h3>
                        <div class="space-y-4 text-sm text-gray-300 text-left">
                            <div class="flex items-start gap-3">
                                <span class="material-symbols-outlined text-gold">chair</span>
                                <div>
                                    <p class="font-bold text-white">O Trono de Tebas</p>
                                    <p>Elevado 5 blocos. Observa tudo de cima.</p>
                                </div>
                            </div>
                            <div class="flex items-start gap-3">
                                <span class="material-symbols-outlined text-stone-400">event_seat</span>
                                <div>
                                    <p class="font-bold text-white">Tronos dos Juízes</p>
                                    <p>Semicírculo abaixo de Tebas. 2 líderes de cada lado.</p>
                                </div>
                            </div>
                            <div class="flex items-start gap-3">
                                <span class="material-symbols-outlined text-red-500">visibility</span>
                                <div>
                                    <p class="font-bold text-white">O Palco do Réu</p>
                                    <p>Um círculo central no nível mais baixo. O réu fica exposto, olhando para cima para seus julgadores.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-black/40 border border-orange-900/50 p-4 rounded-lg text-center hover:border-orange-500 transition-colors group">
                            <span class="material-symbols-outlined text-4xl text-orange-500 mb-2 group-hover:scale-110 transition-transform">local_fire_department</span>
                            <h4 class="font-bold text-white mb-1">Ritual do Voto</h4>
                            <p class="text-xs text-gray-400">
                                Juízes lançam Lãs no fogo central.<br>
                                <span class="text-emerald-400">Verde: Inocente</span> | <span class="text-red-500">Vermelha: Culpado</span>
                            </p>
                        </div>

                        <div class="bg-black/40 border border-purple-900/50 p-4 rounded-lg text-center hover:border-purple-500 transition-colors group">
                            <span class="material-symbols-outlined text-4xl text-purple-500 mb-2 group-hover:scale-110 transition-transform">gavel</span>
                            <h4 class="font-bold text-white mb-1">O Tártaro (Punição)</h4>
                            <p class="text-xs text-gray-400">
                                Sem local fixo. As punições são vontade dos juízes, executadas sob autorização de Tebas.
                            </p>
                        </div>
                    </div>
                    
                    <div class="bg-stone-800 p-4 rounded border-l-4 border-red-900">
                        <p class="text-xs text-gray-300 italic">
                            "O Tribunal não é um lugar de debate, é onde destinos são ceifados. Quando a sentença é proferida e autorizada por Tebas, ela se torna uma lei da natureza: implacável, inegociável e aterrorizante."
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="saga" class="py-20 bg-bedrock relative overflow-hidden fade-in-section">
        <div class="max-w-5xl mx-auto px-4">
            <h2 class="text-4xl font-heading text-center text-white mb-8">V. A Saga dos Deuses</h2>
            
            <div class="bg-red-950/40 border-2 border-red-600 p-6 rounded-lg mb-16 text-center shadow-[0_0_20px_rgba(220,38,38,0.3)]">
                <h3 class="text-red-500 font-heading text-2xl mb-4 flex items-center justify-center gap-2">
                    <span class="material-symbols-outlined">warning</span> DECRETO SUPREMO SOBRE TITANS
                </h3>
                <div class="text-gray-300 text-sm space-y-2 text-left md:text-center max-w-3xl mx-auto">
                    <p>Os Titans surgirão <strong>exclusivamente pela vontade divina</strong>, em uma Arena preparada para a batalha nos dias de Evento.</p>
                    <p class="text-red-400 font-bold">⚠️ PROIBIÇÃO: É estritamente proibido invocar (Wither) ou buscar (Dragon/Guardian/Warden) qualquer Titan por conta própria no mundo aberto.</p>
                    <p><strong>Punição:</strong> A desobediência resultará em <span class="text-red-500 font-bold">Punição Divina Severa</span> (Conforme á escolha de Tebas ).</p>
                    <p class="italic opacity-75">Após a morte de um Titan, um novo capítulo se inicia.</p>
                    <p class="italic opacity-75">Caso o Titan vença todas os Clãs, o evento irá ocorrer novamente em algum momento até que o Titan seja derrotado.</p>
                </div>
            </div>

            <div class="relative border-l-2 border-stone-800 ml-4 md:ml-1/2 space-y-20">
                <div class="relative md:w-1/2 md:ml-auto pl-8 md:pl-12 fade-in-section">
                    <div class="absolute top-0 -left-3 md:-left-3 w-6 h-6 rounded-full bg-mythicblue border-4 border-stone-800"></div>
                    <div class="bg-obsidian border border-blue-900 rounded-lg overflow-hidden shadow-lg shadow-blue-900/20 card-hover transition-all">
                        <div class="relative h-40">
                             <!-- Imagem Local: elder-guardian.jpg -->
                             <img src="elder-guardian.jpg" alt="Elder Guardian Titan" class="w-full h-full object-cover opacity-70">
                             <div class="absolute inset-0 bg-blue-900/30"></div>
                        </div>
                        
                        <div class="p-6">
                            <h3 class="text-blue-400 font-heading text-xl mb-1">Capítulo 1: A Fúria de Poseidon</h3>
                            <div class="space-y-2 mt-4">
                                <div class="flex items-center gap-2 text-sm text-gray-300">
                                    <span class="material-symbols-outlined text-xs">water_drop</span> Alvo: Elder Guardian (Titan)
                                </div>
                                <div class="bg-blue-900/20 p-3 rounded border border-blue-900/50">
                                    <p class="text-xs text-blue-200 font-bold mb-1">RECOMPENSA DO CLÃ:</p>
                                    <ul class="text-xs text-gray-400 list-disc list-inside">
                                        <li>1 Tridente (Lealdade) por membro</li>
                                        <li>1 Totem da Imortalidade por membro</li>
                                        <li class="text-gold">+R$ 25,00 Bônus</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="relative md:w-1/2 md:mr-auto pl-8 md:pl-12 md:text-right fade-in-section">
                    <div class="absolute top-0 -left-3 md:left-auto md:-right-3 w-6 h-6 rounded-full bg-red-900 border-4 border-stone-800"></div>
                    <div class="bg-obsidian border border-red-900 rounded-lg overflow-hidden shadow-lg shadow-red-900/20 card-hover transition-all">
                        <div class="relative h-40">
                             <!-- Imagem Local: wither.jpg -->
                             <img src="wither.jpg" alt="Wither Titan" class="w-full h-full object-cover opacity-70">
                             <div class="absolute inset-0 bg-red-900/30"></div>
                        </div>

                        <div class="p-6">
                            <h3 class="text-red-500 font-heading text-xl mb-1">Capítulo 2: O Chamado de Hades</h3>
                            <div class="space-y-2 mt-4">
                                <div class="flex items-center gap-2 text-sm text-gray-300 md:justify-end">
                                    <span class="material-symbols-outlined text-xs">skull</span> Alvo: Wither (Titan)
                                </div>
                                <div class="bg-red-900/20 p-3 rounded border border-red-900/50 text-left">
                                    <p class="text-xs text-red-200 font-bold mb-1">RECOMPENSA DO CLÃ:</p>
                                    <ul class="text-xs text-gray-400 list-disc list-inside">
                                        <li>1 Nether Star por membro</li>
                                        <li>1 Espada de Netherite por membro</li>
                                        <li class="text-gold">+R$ 25,00 Bônus</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="relative md:w-1/2 md:ml-auto pl-8 md:pl-12 fade-in-section">
                    <div class="absolute top-0 -left-3 md:-left-3 w-6 h-6 rounded-full bg-white border-4 border-stone-800"></div>
                    <div class="bg-obsidian border border-gray-600 rounded-lg overflow-hidden shadow-lg shadow-white/10 card-hover transition-all">
                         <div class="relative h-40">
                             <!-- Imagem Local: ender-dragon-lightning.jpg -->
                             <img src="ender-dragon-lightning.jpg" alt="Ender Dragon Titan" class="w-full h-full object-cover opacity-70">
                             <div class="absolute inset-0 bg-gray-900/30"></div>
                        </div>

                        <div class="p-6">
                            <h3 class="text-white font-heading text-xl mb-1">Capítulo 3: Os Céus de Zeus</h3>
                            <div class="space-y-2 mt-4">
                                <div class="flex items-center gap-2 text-sm text-gray-300">
                                    <span class="material-symbols-outlined text-xs">flight</span> Alvo: Ender Dragon (Titan)
                                </div>
                                <div class="bg-gray-800/50 p-3 rounded border border-gray-600">
                                    <p class="text-xs text-white font-bold mb-1">RECOMPENSA DO CLÃ:</p>
                                    <ul class="text-xs text-gray-400 list-disc list-inside">
                                        <li>1 Elytra (Inquebrável/Remendo) por membro</li>
                                        <li class="text-[#D2691E]">Kit Completo de Netherite por membro</li>
                                        <li class="text-gold">+R$ 25,00 Bônus</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="relative md:w-1/2 md:mr-auto pl-8 md:pl-12 md:text-right fade-in-section">
                    <div class="absolute top-0 -left-3 md:left-auto md:-right-3 w-6 h-6 rounded-full bg-teal-900 border-4 border-stone-800"></div>
                    <div class="bg-obsidian border border-teal-900 rounded-lg overflow-hidden shadow-lg shadow-teal-900/20 card-hover transition-all">
                         <div class="relative h-40">
                             <!-- Imagem Local: warden-boss.jpg -->
                             <img src="warden-boss.jpg" alt="Warden Titan" class="w-full h-full object-cover opacity-70">
                             <div class="absolute inset-0 bg-teal-900/30"></div>
                        </div>
                        
                        <div class="p-6">
                            <h3 class="text-teal-500 font-heading text-xl mb-1">Capítulo 4: O Tártaro</h3>
                            <div class="space-y-2 mt-4">
                                <div class="flex items-center gap-2 text-sm text-gray-300 md:justify-end">
                                    <span class="material-symbols-outlined text-xs">visibility</span> Alvo: Warden (Titan)
                                </div>
                                <div class="bg-teal-900/20 p-3 rounded border border-teal-900/50 text-left">
                                    <p class="text-xs text-teal-200 font-bold mb-1">RECOMPENSA & RISCO:</p>
                                    <ul class="text-xs text-gray-400 list-disc list-inside">
                                        <li class="font-bold text-white">Item de Poder Absoluto (Artefato Único)</li>
                                        <li class="text-gold">+R$ 25,00 Bônus</li>
                                        <li class="text-red-500 mt-1">Consequência: Cristais perdem proteção.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="relative w-full text-center mt-24 fade-in-section">
                    <div class="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8 rounded-full bg-gold border-4 border-white animate-pulse"></div>
                    <div class="max-w-3xl mx-auto bg-gradient-to-b from-red-950 to-black border-2 border-gold p-8 rounded-xl relative overflow-hidden">
                        <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/diagmonds-light.png')] opacity-10"></div>
                        <h3 class="text-4xl font-heading text-gold mb-2 uppercase">Capítulo Final: A Titanomaquia</h3>
                        <p class="text-red-400 font-bold mb-6">GUERRA TOTAL // ELIMINAÇÃO</p>
                        <p class="text-gray-300 mb-4">Os vidros dos Cristais tornam-se quebráveis. O último Clã com o cristal intacto leva o Grande Prêmio.</p>
                        <div class="inline-block bg-gold text-black font-black text-xl px-6 py-2 rounded">
                            GRANDE PRÊMIO
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="tesouro" class="py-20 relative overflow-hidden bg-bedrock fade-in-section">
        <div class="absolute inset-0 bg-gold/5"></div>
        <div class="max-w-6xl mx-auto px-4 text-center relative z-10">
            <h2 class="text-5xl font-heading text-gold mb-16 drop-shadow-lg">VII. O Tesouro de Tebas</h2>

            <div class="flex flex-col md:flex-row justify-center items-center gap-16">
                
                <div class="relative group cursor-default">
                    <div class="absolute inset-0 bg-gradient-to-t from-gold/20 to-transparent blur-xl opacity-30 group-hover:opacity-50 transition-opacity"></div>
                    <div class="relative z-10 flex flex-col items-center transform transition-transform duration-300 group-hover:scale-105">
                        <span class="material-symbols-outlined text-8xl text-stone-400 mb-4 drop-shadow-2xl">account_balance</span>
                        <div class="bg-obsidian border-2 border-stone-600 px-6 py-3 rounded-lg text-center shadow-lg group-hover:border-gold transition-colors">
                            <p class="text-xs text-gray-500 uppercase tracking-widest mb-1">Prêmio Base</p>
                            <p class="text-4xl font-black text-white">R$ 100,00</p>
                        </div>
                    </div>
                </div>

                <div class="text-gold text-4xl font-bold opacity-50">+</div>

                <div class="relative group cursor-default">
                    <div class="absolute inset-0 bg-gradient-to-t from-gold/30 to-transparent blur-xl opacity-40 group-hover:opacity-60 transition-opacity"></div>
                    <div class="relative z-10 flex flex-col items-center transform transition-transform duration-300 group-hover:scale-105">
                        <div class="relative">
                            <span class="material-symbols-outlined text-8xl text-gold mb-4 drop-shadow-2xl animate-float">diamond</span>
                            <span class="absolute -top-2 -right-4 bg-red-600 text-white text-xs font-bold px-2 py-1 rounded-full border border-red-800">x4 Titans</span>
                        </div>
                        <div class="bg-obsidian border-2 border-gold/50 px-6 py-3 rounded-lg text-center shadow-lg group-hover:border-gold transition-colors">
                            <p class="text-xs text-gold uppercase tracking-widest mb-1">Bônus de Glória</p>
                            <p class="text-4xl font-black text-gold">R$ 100,00</p>
                        </div>
                    </div>
                </div>

                <div class="text-gold text-4xl font-bold opacity-50">=</div>

                <div class="relative group cursor-default">
                    <div class="absolute inset-0 bg-gradient-to-t from-yellow-500/40 to-transparent blur-2xl opacity-50 group-hover:opacity-80 transition-opacity"></div>
                    <div class="relative z-10 flex flex-col items-center transform transition-transform duration-300 group-hover:scale-110">
                        <span class="material-symbols-outlined text-9xl text-yellow-300 mb-4 drop-shadow-[0_0_15px_rgba(255,215,0,0.8)] animate-pulse-slow">emoji_events</span>
                        <div class="bg-gradient-to-b from-gold to-yellow-600 text-black border-2 border-yellow-200 px-8 py-4 rounded-xl text-center shadow-[0_0_30px_rgba(255,215,0,0.4)]">
                            <p class="text-xs text-black/70 uppercase tracking-widest mb-1 font-bold">Prêmio Máximo</p>
                            <p class="text-5xl font-black">R$ 200,00</p>
                        </div>
                    </div>
                </div>

            </div>
            
            <p class="mt-16 text-gray-400 italic text-sm max-w-lg mx-auto border-t border-stone-800 pt-8">
                 O prêmio + bônus conquistado será entregue apenas ao último Clã de pé quando a poeira da Titanomaquia baixar.
                As equipes que derrotarem algum Titan receberão o bônus.
            </p>
        </div>
    </section>

    <footer class="bg-black py-16 border-t border-stone-800 text-center relative overflow-hidden">
        <div class="absolute inset-0 bg-gradient-to-t from-gold/10 to-transparent opacity-50"></div>
        
        <div class="relative z-10">
            <p class="font-heading text-gold text-lg uppercase tracking-widest mb-2">Assinado</p>
            <p class="font-heading text-white text-2xl font-bold mb-8">Tebas & O Supremo Tribunal dos Quatro</p>
            
            <div class="h-px w-24 bg-gold mx-auto mb-8"></div>
            
            <p class="font-heading text-4xl md:text-5xl text-transparent bg-clip-text bg-gradient-to-r from-yellow-200 via-gold to-yellow-200 drop-shadow-[0_2px_2px_rgba(0,0,0,0.8)] animate-pulse-slow font-black">
                "QUE VENÇA O MELHOR CLÃ"
            </p>
        </div>
    </footer>

    <script>
        // --- 0. EXPORT FUNCTIONALITY ---
        function downloadPage() {
            const htmlContent = document.documentElement.outerHTML;
            const blob = new Blob([htmlContent], {type: 'text/html'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'titanomaquia_final.html';
            document.body.appendChild(a);
            a.click();
            setTimeout(() => { document.body.removeChild(a); window.URL.revokeObjectURL(url); }, 0);
        }

        // --- 1. Global Animations ---
        document.addEventListener('DOMContentLoaded', () => {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) entry.target.classList.add('is-visible');
                });
            }, { threshold: 0.1 });
            document.querySelectorAll('.fade-in-section').forEach(section => observer.observe(section));
            
            // Initialize Countdown
            updateCountdown();
            setInterval(updateCountdown, 1000);

            // Populate Themes
            const themeSelect = document.getElementById('clan-theme');
            Object.keys(clanThemes).forEach(key => {
                const option = document.createElement('option');
                option.value = key;
                option.text = `${clanThemes[key].symbol} ${key}`;
                themeSelect.appendChild(option);
            });

            // Initialize Glass Picker
            renderGlassPicker();

            // Member count validation listener
            document.getElementById('clan-members').addEventListener('input', validateMembers);
        });
        
        // --- 2. Countdown Logic ---
        function updateCountdown() {
            const targetDate = new Date("December 15, 2025 00:00:00").getTime();
            const now = new Date().getTime();
            const difference = targetDate - now;

            if (difference > 0) {
                const days = Math.floor(difference / (1000 * 60 * 60 * 24));
                const hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((difference % (1000 * 60)) / 1000);

                document.getElementById("days").innerText = String(days).padStart(2, '0');
                document.getElementById("hours").innerText = String(hours).padStart(2, '0');
                document.getElementById("minutes").innerText = String(minutes).padStart(2, '0');
                document.getElementById("seconds").innerText = String(seconds).padStart(2, '0');
            } else {
                // If date is passed
                document.getElementById("days").innerText = "00";
                document.getElementById("hours").innerText = "00";
                document.getElementById("minutes").innerText = "00";
                document.getElementById("seconds").innerText = "00";
            }
        }

        // --- 3. Economy Logic ---
        const state = {
            registeredClans: [],
            takenEconomies: new Set(),
            takenColors: new Set(),
            CLAN_LIMIT: 4,
            MEMBER_LIMIT: 6,
            candidates: [],
            votedUsers: new Set(),
            currentSelections: new Set(), // For approval voting
            resultsRevealed: false
        };

        const clanThemes = {
            "LEGADO": { symbol: "Ω", desc: "\"Nascidos no fogo, forjados no mito.\" A imortalidade não é dada, é conquistada pela espada. Lutem para serem eternos.", leader: "ARCONTE", coleader: "EXECUTOR", member: "ESPARTANOS" },
            "ONISCIÊNCIA": { symbol: "☥", desc: "\"Os olhos que veem além do véu.\" Enquanto o mundo tropeça no escuro, vocês caminham guiados pela certeza divina.", leader: "ORÁCULO", coleader: "ARAUTO", member: "ASCENDENTES" },
            "IMPÉRIO": { symbol: "♛", desc: "\"A ordem imposta pelo ferro.\" A arquitetura da conquista perfeita. Onde a águia pousa, o joelho se dobra.", leader: "IMPERADOR", coleader: "LEGATUS", member: "PRETORIANOS" },
            "MILITAR": { symbol: "⚔", desc: "\"A tempestade de aço.\" Sem política, apenas estratégia. Vocês são a brutal e honesta realidade da linha de frente.", leader: "SOBERANO", coleader: "MARECHAL", member: "VANGUARDA" },
            "MAJESTADE": { symbol: "⚓", desc: "\"O sol nunca se põe aqui.\" Reivindiquem a terra e o mar por direito de sangue. A expansão é a única lei.", leader: "IMPERADOR", coleader: "ALMIRANTE", member: "CAVALEIROS" },
            "OCULTO": { symbol: "☾", desc: "\"O poder verdadeiro consome.\" Sirvam às sombras antigas. Façam do medo seu aliado e da escuridão o seu lar.", leader: "PRIMORDIAL", coleader: "PROFETA", member: "ACÓLITOS" },
            "DOUTRINA": { symbol: "†", desc: "\"Uma fé. Um caminho. Uma verdade.\" Dúvida é fraqueza. Lealdade absoluta a um propósito sagrado é a força.", leader: "MESTRE", coleader: "APÓSTOLO", member: "DISCÍPULOS" },
            "JUSTIÇA": { symbol: "⚖", desc: "\"A lei é a âncora do mundo.\" Vocês são a balança que julga as almas e a espada fria que executa a sentença.", leader: "TETRARCA", coleader: "JUSTIÇAR", member: "PATRICIANOS" },
            "NOBREZA": { symbol: "⚜", desc: "\"O sangue azul não se mistura.\" Vençam a guerra antes da batalha começar. Poder, ouro e influência governam tudo.", leader: "DUQUE", coleader: "CHANCELER", member: "MARQUÊSES" },
            "HONRA": { symbol: "❀", desc: "\"A morte é leve; o dever, uma montanha.\" A perfeição marcial encontra a paz interior. Cada corte é um tributo solene.", leader: "SHOGUN", coleader: "TAISHO", member: "KENSEI" },
            "SOBERANIA": { symbol: "♚", desc: "\"Nossa terra, nosso trono.\" O juramento feudal é inquebrável. Vocês são os legítimos donos do solo.", leader: "MONARCA", coleader: "LORDE", member: "BARÕES" },
            "PIRATA": { symbol: "☠", desc: "\"Parte do navio, parte da tripulação.\" Vocês não navegam sobre as águas, vocês emergem delas.", leader: "LORDE PIRATA", coleader: "IMEDIATO", member: "SAQUEADORES" },
            "LAS NOCHES": { symbol: "🌒", desc: "\"Não há nada além do medo para aqueles que não conseguem evoluir.\" Quebrem as barreiras da existência e governem o vazio.", leader: "TRANSCENDENTAL", coleader: "GOVERNANTE", member: "ESPADAS" }
        };

        const minecraftGlassColors = [
            { name: "Branco", hex: "#FFFFFF" },
            { name: "Vermelho", hex: "#B02E26" },
            { name: "Laranja", hex: "#F9801D" },
            { name: "Rosa", hex: "#F38BAA" },
            { name: "Amarelo", hex: "#FED83D" },
            { name: "Verde-limão", hex: "#80C71F" },
            { name: "Verde", hex: "#5E7C16" },
            { name: "Ciano", hex: "#169C9C" },
            { name: "Azul", hex: "#3C44AA" },
            { name: "Magenta", hex: "#C74EBD" },
            { name: "Roxo", hex: "#8932B8" },
            { name: "Marrom", hex: "#835432" },
            { name: "Cinza", hex: "#474F52" },
            { name: "Cinza-claro", hex: "#9D9D97" },
            { name: "Preto", hex: "#1D1D21" }
        ];

        // --- ELECTION LOGIC ---

        function registerCandidateForElection() {
            const name = document.getElementById('new-candidate-name').value.trim();
            const slogan = document.getElementById('candidate-slogan').value.trim();
            const strategy = document.getElementById('candidate-farm').value;
            
            if (!name) {
                alert("Por favor, insira seu Nick.");
                return;
            }
            if(!slogan) {
                alert("Um líder precisa de um lema! Escreva uma frase de campanha.");
                return;
            }
            
            if(state.candidates.some(c => c.name.toLowerCase() === name.toLowerCase())) {
                alert("Este candidato já está inscrito.");
                return;
            }

            state.candidates.push({ 
                name: name, 
                slogan: slogan,
                strategy: strategy,
                votes: 0,
                timestamp: Date.now() // For tie-breaking antiquity
            });
            
            document.getElementById('new-candidate-name').value = '';
            document.getElementById('candidate-slogan').value = '';
            
            renderElectionUI();
        }

        function toggleCandidateSelection(index) {
            // Toggle logic
            if(state.currentSelections.has(index)) {
                state.currentSelections.delete(index);
            } else {
                if(state.currentSelections.size >= 4) {
                    alert("Você deve selecionar exatamente 4 candidatos.");
                    return;
                }
                state.currentSelections.add(index);
            }
            
            // Update UI directly for responsiveness
            renderElectionUI();
        }

        function submitMultiVote() {
            const voterInput = document.getElementById('voter-name');
            const voterName = voterInput.value.trim();

            if (!voterName) {
                alert("Por favor, identifique-se no campo 'Seu Identificador' para computar seu voto.");
                voterInput.focus();
                return;
            }
            
            if (state.currentSelections.size !== 4) {
                alert("Você deve selecionar EXATAMENTE 4 candidatos para validar seu voto.");
                return;
            }

            // Check self-voting against all selected candidates
            let isSelfVoting = false;
            state.currentSelections.forEach(index => {
                 if (state.candidates[index].name.toLowerCase() === voterName.toLowerCase()) {
                     isSelfVoting = true;
                 }
            });

            if (isSelfVoting) {
                alert("Honra, guerreiro! Você não pode votar em si mesmo. Remova sua seleção.");
                return;
            }

            if(state.votedUsers.has(voterName.toLowerCase())) {
                 alert("Você já votou nesta sessão.");
                 return;
            }

            // Commit votes
            state.currentSelections.forEach(index => {
                state.candidates[index].votes++;
            });
            
            state.votedUsers.add(voterName.toLowerCase());
            state.currentSelections.clear(); // Reset selection
            
            renderElectionUI();
            alert(`Votos computados com sucesso! A contagem é secreta.`);
        }
        
        function revealResults() {
             if(state.candidates.length < 1) {
                 alert("Não há candidatos suficientes para revelar.");
                 return;
             }
             
             if(!confirm("Tem certeza que deseja encerrar a votação e revelar os Reis? Esta ação é irreversível.")) return;
             
             state.resultsRevealed = true;
             renderElectionUI();
        }

        function renderElectionUI() {
            const listEl = document.getElementById('candidates-list');
            const countEl = document.getElementById('candidate-count-display');
            const statusText = document.getElementById('election-status-text');
            const acclamationMsg = document.getElementById('acclamation-msg');
            const voterBox = document.getElementById('voter-identity-box');
            const candidateFormBox = document.getElementById('candidate-form-box');
            const titleEl = document.getElementById('candidates-title');
            const selectedCountDisplay = document.getElementById('selected-count-display');
            const confirmBtn = document.getElementById('confirm-vote-btn');

            const totalCandidates = state.candidates.length;
            
            // Update Selection Counter UI
            if(selectedCountDisplay) {
                selectedCountDisplay.innerText = state.currentSelections.size;
                if(state.currentSelections.size === 4) {
                    selectedCountDisplay.classList.remove('text-gold');
                    selectedCountDisplay.classList.add('text-emerald-400');
                    confirmBtn.disabled = false;
                    confirmBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                } else {
                    selectedCountDisplay.classList.add('text-gold');
                    selectedCountDisplay.classList.remove('text-emerald-400');
                    confirmBtn.disabled = true;
                    confirmBtn.classList.add('opacity-50', 'cursor-not-allowed');
                }
            }
            
            // -- STATE MANAGEMENT --
            if (state.resultsRevealed) {
                // --- FINAL RESULTS PHASE (THE TABLE ROUND) ---
                countEl.innerText = "A Vontade do Povo";
                statusText.innerText = "REIS DEFINIDOS";
                statusText.className = "text-gold font-black uppercase tracking-widest";
                titleEl.innerText = "A Távola dos 4 Reis";
                acclamationMsg.classList.add('hidden');
                voterBox.classList.add('hidden');
                candidateFormBox.classList.add('hidden');

                // Logic: 
                // 1. Sort by Votes DESC, then Timestamp ASC (Antiquity)
                let sortedCandidates = [...state.candidates].sort((a, b) => {
                    if (b.votes !== a.votes) return b.votes - a.votes;
                    return a.timestamp - b.timestamp;
                });

                // 2. Cut Top 4
                const elected = sortedCandidates.slice(0, 4);

                // 3. Shuffle for display (No ranking)
                const shuffledElected = elected.sort(() => Math.random() - 0.5);

                listEl.innerHTML = '';
                listEl.className = "grid grid-cols-1 md:grid-cols-2 gap-6"; // 2x2 Grid

                shuffledElected.forEach(c => {
                   const item = document.createElement('div');
                   // Special Gold Card
                   item.className = "bg-gradient-to-b from-stone-900 to-black border-2 border-gold p-6 rounded-lg relative overflow-hidden shadow-[0_0_30px_rgba(255,215,0,0.2)] transform transition-all hover:scale-105";
                   
                   item.innerHTML = `
                        <div class="absolute top-0 left-0 w-full h-1 bg-gold"></div>
                        <div class="flex flex-col items-center text-center relative z-10">
                            <span class="material-symbols-outlined text-5xl text-gold mb-2 drop-shadow-lg">crown</span>
                            <h4 class="font-heading text-2xl text-white font-black mb-1">${c.name}</h4>
                            <div class="bg-gold/20 border border-gold/50 px-3 py-1 rounded text-xs text-gold font-bold uppercase tracking-widest mb-4">
                                ELEITO (${c.votes} Votos)
                            </div>
                            <p class="text-sm text-gray-300 italic font-serif">"${c.slogan}"</p>
                            <div class="mt-4 pt-4 border-t border-white/10 w-full flex justify-center gap-2 text-gray-400 text-xs">
                                <span class="material-symbols-outlined text-base">strategy</span>
                                Foco: <span class="text-white font-bold">${c.strategy}</span>
                            </div>
                        </div>
                   `;
                   listEl.appendChild(item);
                });
                return; // Stop here for results view
            }

            // --- STANDARD VOTING / REGISTRATION PHASE ---
            countEl.innerText = `${totalCandidates} Candidatos`;
            const isVotingPhase = totalCandidates > 4;
            
            if(isVotingPhase) {
                statusText.innerText = "VOTAÇÃO DE APROVAÇÃO (Múltipla)";
                statusText.className = "text-purple-400 font-bold animate-pulse";
                acclamationMsg.classList.add('hidden');
                voterBox.classList.remove('hidden');
            } else {
                statusText.innerText = "Inscrições Abertas";
                statusText.className = "text-white font-bold";
                acclamationMsg.classList.remove('hidden');
                voterBox.classList.add('hidden');
                candidateFormBox.classList.remove('hidden');
            }

            listEl.innerHTML = '';
            listEl.className = "grid grid-cols-1 md:grid-cols-2 gap-4";

            if(state.candidates.length === 0) {
                 listEl.innerHTML = '<div class="text-gray-500 italic col-span-2 text-center py-10">Nenhum candidato se apresentou ainda.</div>';
                 return;
            }

            state.candidates.forEach((c, i) => {
                const isSelected = state.currentSelections.has(i);
                const item = document.createElement('div');
                // Add selection styles if voting phase
                let selectionClasses = "";
                let clickHandler = "";
                
                if(isVotingPhase) {
                    selectionClasses = `cursor-pointer hover:border-purple-500 candidate-card ${isSelected ? 'selected border-emerald-500 bg-emerald-900/10 shadow-[0_0_15px_rgba(16,185,129,0.2)]' : 'border-stone-700'}`;
                    clickHandler = `onclick="toggleCandidateSelection(${i})"`;
                } else {
                    selectionClasses = "border-stone-700";
                }

                item.className = `bg-stone-900 border p-4 rounded relative overflow-hidden transition-all group ${selectionClasses}`;
                if(isVotingPhase) item.setAttribute('onclick', `toggleCandidateSelection(${i})`);
                
                // Farm Icon logic
                let farmIcon = 'help';
                if(c.strategy === 'Ferro') farmIcon = 'shield';
                if(c.strategy === 'Ouro') farmIcon = 'payments';
                if(c.strategy === 'Raid') farmIcon = 'local_fire_department';
                if(c.strategy === 'XP') farmIcon = 'bolt';

                // Visual Checkmark for selection
                const checkmark = isVotingPhase ? `
                    <div class="absolute top-2 right-2 w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${isSelected ? 'bg-emerald-500 border-emerald-500 scale-110' : 'border-stone-600 bg-black/50'}">
                        ${isSelected ? '<span class="material-symbols-outlined text-white text-sm">check</span>' : ''}
                    </div>
                ` : '';

                item.innerHTML = `
                    ${checkmark}
                    <div class="flex justify-between items-start relative z-10 mb-2 pr-8">
                        <h4 class="font-heading text-lg text-white font-bold">${c.name}</h4>
                    </div>
                    <div class="flex items-center gap-2 mb-3">
                         <div class="text-xs bg-black/40 px-2 py-1 rounded border border-stone-600 text-gray-400 flex items-center gap-1">
                            <span class="material-symbols-outlined text-sm">${farmIcon}</span>
                            ${c.strategy}
                        </div>
                    </div>
                    <p class="text-sm text-gray-400 italic font-serif border-l-2 border-purple-500/50 pl-3">"${c.slogan}"</p>
                `;
                listEl.appendChild(item);
            });
        }


        // --- GLASS PICKER & CLAN REGISTRATION ---
        // (Restante do código permanece o mesmo)

        function renderGlassPicker() {
            const picker = document.getElementById('glass-picker');
            picker.innerHTML = '';
            
            minecraftGlassColors.forEach(colorObj => {
                const glass = document.createElement('div');
                const isTaken = state.takenColors.has(colorObj.hex);
                glass.className = `glass-option ${isTaken ? 'disabled' : ''}`;
                glass.style.backgroundColor = colorObj.hex;
                glass.title = isTaken ? `${colorObj.name} (Indisponível)` : colorObj.name;
                
                // Add shine effects
                const shine1 = document.createElement('div');
                shine1.className = 'glass-shine';
                const shine2 = document.createElement('div');
                shine2.className = 'glass-shine-2';
                
                glass.appendChild(shine1);
                glass.appendChild(shine2);
                
                if(!isTaken) {
                    glass.onclick = () => selectGlassColor(colorObj.hex, colorObj.name, glass);
                }
                
                picker.appendChild(glass);
            });
            
            // Select first available by default if current selection is invalid
            const currentHex = document.getElementById('clan-color').value;
            if(state.takenColors.has(currentHex)) {
                 const available = minecraftGlassColors.find(c => !state.takenColors.has(c.hex));
                 if(available) {
                     // Find element index
                     const index = minecraftGlassColors.indexOf(available);
                     if(picker.children[index]) {
                         selectGlassColor(available.hex, available.name, picker.children[index]);
                     }
                 }
            } else {
                // Re-highlight current selection
                 const index = minecraftGlassColors.findIndex(c => c.hex === currentHex);
                 if(index >= 0 && picker.children[index] && !state.takenColors.has(currentHex)) {
                     picker.children[index].classList.add('selected');
                 }
            }
        }

        function selectGlassColor(hex, name, element) {
            if(state.takenColors.has(hex)) return;

            document.getElementById('clan-color').value = hex;
            document.getElementById('selected-color-name').innerText = `Selecionado: ${name}`;
            
            // Update UI selection state
            const allGlasses = document.querySelectorAll('.glass-option');
            allGlasses.forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
        }

        function selectFarm(type) {
            if (state.takenEconomies.has(type)) {
                const msgEl = document.getElementById('economy-msg');
                if (msgEl) {
                    msgEl.innerHTML = `<span class="text-red-500">Esta economia já foi escolhida por outro clã!</span>`;
                    msgEl.classList.remove('opacity-0');
                }
                return;
            }

            const options = ['iron', 'gold', 'raid', 'xp'];
            options.forEach(opt => {
                const el = document.getElementById('opt-' + opt);
                if (el && !state.takenEconomies.has(opt)) {
                    el.classList.remove('border-gold', 'bg-stone-800');
                    el.classList.add('bg-obsidian', 'border-stone-600');
                    const checkIcon = el.querySelector('.check-icon');
                    if (checkIcon) checkIcon.classList.add('opacity-0');
                }
            });

            const activeEl = document.getElementById('opt-' + type);
            if (activeEl) {
                activeEl.classList.remove('bg-obsidian', 'border-stone-600');
                activeEl.classList.add('border-gold', 'bg-stone-800');
                const checkIcon = activeEl.querySelector('.check-icon');
                if (checkIcon) checkIcon.classList.remove('opacity-0');
            }
            
            const names = {
                'iron': 'Caminho do Aço (Ferro)',
                'gold': 'Caminho da Riqueza (Ouro)',
                'raid': 'Caminho da Vida (Totens)',
                'xp': 'Caminho do Encanto (XP)'
            };
            
            const msgEl = document.getElementById('economy-msg');
            if (msgEl) {
                msgEl.innerText = `Seu Clã escolheu o ${names[type]}`;
                msgEl.classList.remove('opacity-0');
            }

            const formInput = document.getElementById('clan-economy-input');
            const formHiddenInput = document.getElementById('clan-economy-type');
            if(formInput && formHiddenInput) {
                formInput.value = names[type];
                formHiddenInput.value = type;
                document.getElementById('registro').scrollIntoView({behavior: 'smooth'});
            }
        }

        // --- 4. War Mode Toggle ---
        let isPurgeMode = false;
        function toggleWarMode() {
            isPurgeMode = !isPurgeMode;
            const btn = document.getElementById('mode-toggle');
            const circle = document.getElementById('toggle-circle');
            const icon = document.getElementById('toggle-icon');
            const bg = document.getElementById('rules-bg');
            const container = document.getElementById('rules-container');
            const title = document.getElementById('rules-title');
            const pvpText = document.getElementById('pvp-text');
            const baseText = document.getElementById('base-text');
            const statusText = document.getElementById('status-text');
            const pvpIcon = document.getElementById('pvp-icon');
            const baseIcon = document.getElementById('base-icon');

            if (isPurgeMode) {
                btn.classList.replace('bg-gray-700', 'bg-red-900');
                circle.classList.add('translate-x-10');
                icon.innerText = 'skull';
                icon.classList.add('text-red-600');
                icon.classList.remove('text-black');
                if(bg) bg.classList.replace('bg-emerald-900', 'bg-red-900');
                if(container) container.classList.replace('border-stone-600', 'border-red-600');
                
                if(title) {
                    title.innerText = "O Expurgo (Sáb/Dom/Feriados)";
                    title.classList.replace('text-emerald-400', 'text-red-500');
                }
                if(pvpText) pvpText.innerHTML = "<span class='text-red-400 font-bold'>LIBERADO 24H.</span> O mapa inteiro é uma arena.";
                if(baseText) baseText.innerHTML = "SAQUE PERMITIDO (Baús/Fornalhas). <br><span class='text-xs text-red-400'>Lei da Destruição: Quebre o necessário para entrar. Proibido demolir por maldade.</span>";
                if(baseIcon) baseIcon.innerText = 'meeting_room';
                if(baseIcon) baseIcon.classList.add('text-red-500');
                if(statusText) {
                    statusText.innerText = "🩸 CAOS E SAQUE";
                    statusText.classList.replace('text-emerald-500', 'text-red-500');
                }
            } else {
                btn.classList.replace('bg-red-900', 'bg-gray-700');
                circle.classList.remove('translate-x-10');
                icon.innerText = 'radio_button_unchecked';
                icon.classList.remove('text-red-600');
                icon.classList.add('text-black');
                if(bg) bg.classList.replace('bg-red-900', 'bg-emerald-900');
                if(container) container.classList.replace('border-red-600', 'border-stone-600');
                
                if(title) {
                    title.innerText = "Segunda a Sexta";
                    title.classList.replace('text-red-500', 'text-emerald-400');
                }
                if(pvpText) pvpText.innerText = "Permitido apenas durante a NOITE (no jogo). De dia, só duelos aceitos.";
                if(pvpIcon) pvpIcon.classList.remove('text-red-500');
                if(baseText) baseText.innerText = "INTOCÁVEIS. Proibido invadir terreno inimigo.";
                if(baseIcon) baseIcon.innerText = 'fort';
                if(baseIcon) baseIcon.classList.remove('text-red-500');
                if(statusText) {
                    statusText.innerText = "🕊️ CONSTRUÇÃO E DIPLOMACIA";
                    statusText.classList.replace('text-red-500', 'text-emerald-500');
                }
            }
        }

        // --- 5. Registration Logic & Validation ---
        function updateThemeInfo() {
            const themeKey = document.getElementById('clan-theme').value;
            const theme = clanThemes[themeKey];
            const infoBox = document.getElementById('theme-info');
            
            if(theme) {
                infoBox.classList.remove('hidden');
                document.getElementById('theme-desc').innerText = theme.desc;
                document.getElementById('theme-leader-title').innerText = theme.leader;
                document.getElementById('theme-coleader-title').innerText = theme.coleader;
                document.getElementById('theme-member-title').innerText = theme.member;
            }
        }

        function validateMembers() {
            const membersInput = document.getElementById('clan-members');
            const feedback = document.getElementById('member-count-feedback');
            const members = membersInput.value.split(',').filter(m => m.trim() !== '');
            const count = members.length;

            feedback.innerText = `${count}/${state.MEMBER_LIMIT} Membros`;

            if (count > state.MEMBER_LIMIT) {
                membersInput.classList.add('error');
                feedback.classList.replace('text-gray-500', 'text-red-500');
                return false;
            } else {
                membersInput.classList.remove('error');
                feedback.classList.replace('text-red-500', 'text-gray-500');
                return true;
            }
        }

        function copyColorCode() {
            const colorInput = document.getElementById('clan-color');
            const feedback = document.getElementById('copy-feedback');
            
            const tempInput = document.createElement('textarea');
            tempInput.value = colorInput.value;
            document.body.appendChild(tempInput);
            tempInput.select();
            document.execCommand('copy');
            document.body.removeChild(tempInput);

            feedback.classList.remove('opacity-0');
            setTimeout(() => {
                feedback.classList.add('opacity-0');
            }, 2000);
        }

        function registerClan() {
            if (state.registeredClans.length >= state.CLAN_LIMIT) {
                alert("O limite de 4 clãs já foi atingido.");
                return;
            }

            const name = document.getElementById('clan-name').value;
            const motto = document.getElementById('clan-motto').value || "Sem lema definido.";
            const color = document.getElementById('clan-color').value;
            const themeKey = document.getElementById('clan-theme').value;
            const leader = document.getElementById('clan-leader').value;
            const coleader = document.getElementById('clan-coleader').value;
            const membersInput = document.getElementById('clan-members').value;
            const economyName = document.getElementById('clan-economy-input').value;
            const economyType = document.getElementById('clan-economy-type').value;

            if(!themeKey) {
                alert("Por favor, escolha um Tema para o clã.");
                return;
            }

            // --- COLOR CHECK ---
            if(state.takenColors.has(color)) {
                alert("Esta cor já foi escolhida por outro clã. Por favor, escolha uma cor diferente.");
                return;
            }

            if(!economyType || state.takenEconomies.has(economyType)) {
                alert("Por favor, selecione uma economia válida e disponível na seção acima.");
                return;
            }

            if (!validateMembers()) {
                 alert(`O limite máximo é de ${state.MEMBER_LIMIT} membros.`);
                 return;
            }
            
            const members = membersInput.split(',').map(m => m.trim()).filter(m => m !== '');

            state.registeredClans.push({ name, motto, color, theme: themeKey, leader, coleader, members, economy: economyName, economyType });
            state.takenEconomies.add(economyType);
            state.takenColors.add(color);

            renderClanList();
            updateEconomyUi(economyType);
            renderGlassPicker(); // Refresh picker to disable taken color
            updateClanCountUi();

            if (state.registeredClans.length >= state.CLAN_LIMIT) {
                document.getElementById('limit-reached-msg').classList.remove('hidden');
                document.getElementById('register-btn').disabled = true;
            }

            document.getElementById('clan-form').reset();
            document.getElementById('theme-info').classList.add('hidden');
            document.getElementById('clan-economy-input').value = '';
            document.getElementById('clan-economy-type').value = '';
            
            // Reset glass picker selection logic handles default selection inside
            renderGlassPicker();
            
            validateMembers(); 
        }

        function renderClanList() {
            const clanList = document.getElementById('clan-list');
            const emptyState = document.getElementById('empty-state');
            
            clanList.innerHTML = ''; // Clear current list

            if (state.registeredClans.length === 0) {
                if (emptyState) {
                    emptyState.style.display = 'block';
                    clanList.appendChild(emptyState);
                }
                return;
            } else {
                if (emptyState) {
                    emptyState.style.display = 'none';
                }
            }

            state.registeredClans.forEach((clan, index) => {
                const theme = clanThemes[clan.theme];
                const card = document.createElement('div');
                // Estilo Minimalista e Escuro (Stone 900) com borda interna sutil
                card.className = "bg-stone-900/95 p-0 rounded-lg border-l-4 shadow-[0_10px_30px_rgba(0,0,0,0.5)] animate-[pulse_0.5s_ease-in-out] relative overflow-hidden group border-t border-r border-b border-white/5 mb-6";
                card.style.borderLeftColor = clan.color;
                
                const coleaderHtml = clan.coleader ? `
                    <div class="py-2 px-4 border-b border-white/5">
                        <span class="text-xs text-gray-500 uppercase tracking-widest font-black block mb-1">${theme.coleader}</span>
                        <p class="text-lg text-white font-serif tracking-wide">${clan.coleader}</p>
                    </div>
                ` : '';

                card.innerHTML = `
                    <!-- Fundo do Card com Gradiente e Símbolo Gigante -->
                    <div class="absolute inset-0 bg-gradient-to-br from-white/5 to-transparent pointer-events-none"></div>
                    <div class="absolute -right-2 top-10 opacity-10 pointer-events-none transform rotate-12 scale-150">
                        <span class="text-9xl font-serif text-white select-none">${theme.symbol}</span>
                    </div>
                    
                    <!-- Selo de Cristal (Canto Superior Direito) -->
                    <div class="absolute top-2 right-2 bg-black/60 rounded-full p-2 border border-white/10 shadow-lg z-20">
                        <span class="material-symbols-outlined text-xl" style="color: ${clan.color}; text-shadow: 0 0 10px ${clan.color}">diamond</span>
                    </div>

                    <!-- Botão de Deletar (Canto Superior Esquerdo) -->
                    <button onclick="deleteClan(${index})" class="absolute top-2 left-2 z-30 text-gray-500 hover:text-red-500 bg-black/40 hover:bg-black/80 rounded p-1 transition-all" title="Excluir Clã">
                        <span class="material-symbols-outlined text-lg">delete</span>
                    </button>

                    <!-- Cabeçalho do Card -->
                    <div class="relative z-10 bg-black/40 p-6 text-center border-b border-white/10">
                        <div class="flex items-center justify-center gap-3 mb-2">
                            <span class="text-2xl text-gold drop-shadow-md">${theme.symbol}</span>
                            <span class="text-sm font-black text-gold uppercase tracking-[0.3em]">${clan.theme}</span>
                            <span class="text-2xl text-gold drop-shadow-md">${theme.symbol}</span>
                        </div>
                        <h3 class="text-4xl font-heading font-black text-transparent bg-clip-text bg-gradient-to-b from-white to-gray-400 mb-1" style="text-shadow: 0 2px 10px ${clan.color}40">
                            ${clan.name}
                        </h3>
                        <p class="text-xs text-gray-400 italic font-serif border-t border-white/10 pt-2 inline-block px-4">"${clan.motto}"</p>
                    </div>

                    <!-- Corpo do Card (Cargos) -->
                    <div class="relative z-10">
                        <!-- Líder em Destaque -->
                        <div class="py-3 px-4 border-b border-white/5 bg-white/5">
                            <span class="text-xs uppercase tracking-widest font-black block mb-1 flex items-center gap-2" style="color: ${clan.color}">
                                <span class="material-symbols-outlined text-xs">crown</span> ${theme.leader}
                            </span>
                            <p class="text-xl text-white font-bold font-heading tracking-wide">${clan.leader}</p>
                        </div>

                        ${coleaderHtml}
                        
                        <!-- Membros -->
                        <div class="py-3 px-4">
                            <span class="text-xs text-gray-500 uppercase tracking-widest font-black block mb-2 border-b border-white/5 pb-1 w-max">${theme.member}</span> 
                            <div class="text-sm text-gray-400 leading-relaxed font-serif">
                                ${clan.members}
                            </div>
                        </div>
                    </div>

                    <!-- Rodapé (Economia) -->
                    <div class="relative z-10 bg-black/60 p-3 flex justify-between items-center border-t border-white/10">
                        <span class="text-[10px] text-gray-600 uppercase tracking-widest">Especialidade</span>
                        <div class="flex items-center gap-2 text-gold">
                            <span class="material-symbols-outlined text-sm">savings</span>
                            <span class="text-xs font-bold uppercase tracking-wide">${clan.economy}</span>
                        </div>
                    </div>
                `;
                
                clanList.prepend(card);
            });
        }

        function deleteClan(index) {
            if (!confirm("Tem certeza que deseja excluir este clã e liberar sua economia?")) return;

            const clan = state.registeredClans[index];
            
            // Remove from array
            state.registeredClans.splice(index, 1);
            
            // Free up economy & Color
            state.takenEconomies.delete(clan.economyType);
            state.takenColors.delete(clan.color);

            resetEconomyUi(clan.economyType);
            
            // Re-render
            renderClanList();
            renderGlassPicker(); // Re-enable color
            updateClanCountUi();
            
            // Re-enable registration if needed
            document.getElementById('limit-reached-msg').classList.add('hidden');
            document.getElementById('register-btn').disabled = false;
        }

        function updateEconomyUi(economyType) {
            const farmEl = document.getElementById('opt-' + economyType);
            if (farmEl) {
                farmEl.classList.add('farm-taken');
                farmEl.onclick = null; 
                const takenLabel = document.createElement('div');
                takenLabel.id = 'taken-label-' + economyType;
                takenLabel.className = 'absolute inset-0 bg-black/80 flex items-center justify-center font-heading text-red-500 text-xl font-bold uppercase tracking-widest z-20';
                takenLabel.innerText = 'ESCOLHIDO';
                farmEl.appendChild(takenLabel);
            }
            const msgEl = document.getElementById('economy-msg');
             if (msgEl) {
                msgEl.innerHTML = '';
                msgEl.classList.add('opacity-0');
            }
        }

        function resetEconomyUi(economyType) {
            const farmEl = document.getElementById('opt-' + economyType);
            if (farmEl) {
                farmEl.classList.remove('farm-taken');
                farmEl.setAttribute('onclick', `selectFarm('${economyType}')`);
                const label = document.getElementById('taken-label-' + economyType);
                if (label) label.remove();
            }
        }
        
        function updateClanCountUi() {
             document.getElementById('clan-count').innerText = `(${state.registeredClans.length}/${state.CLAN_LIMIT})`;
        }
    </script>
</body>
</html>
